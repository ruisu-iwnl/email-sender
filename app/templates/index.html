{% extends 'base.html' %}

{% block title %}Email Sender{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Send Email</h5>
        <form method="POST">
          <div class="mb-3">
            <label for="recipients" class="form-label">Email Addresses</label>
            <textarea class="form-control" id="recipients" name="recipients" rows="3" placeholder="Enter email addresses, one per line or separated by commas"></textarea>
            <div class="form-text">Separate multiple emails with commas or put each on a new line</div>
          </div>
          
          <div class="mb-3">
            <label for="subject" class="form-label">Subject</label>
            <input type="text" class="form-control" id="subject" name="subject" placeholder="Email subject">
          </div>
          
          <div class="mb-3">
            <label for="content" class="form-label">Message</label>
            <textarea class="form-control" id="content" name="content" rows="8" placeholder="Type your message here..."></textarea>
          </div>
          
          <div class="mb-3">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="use-html-content" name="use_html_content">
              <label class="form-check-label" for="use-html-content">
                Use mailcontent.html as email content
              </label>
            </div>
          </div>
          
          <div class="mb-3">
            <label for="file-upload" class="form-label">Attachments</label>
            <input type="file" class="form-control" id="file-upload" name="attachments" multiple accept=".link,.jpeg,.jpg,.png,.docx,.xlsx,.pdf">
            <div class="form-text">Supported formats: LINK, JPEG, JPG, PNG, DOCX, XLSX, PDF</div>
            <div id="file-list" class="mt-2"></div>
          </div>
          
          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg">Send Email</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">Console</h5>
      </div>
      <div class="card-body">
        <div id="console-output" class="bg-dark text-light p-3 rounded" style="height: 400px; overflow-y: auto; font-family: monospace;">
          <div class="text-light">Ready to send emails...</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="filePreviewModal" tabindex="-1" aria-labelledby="filePreviewModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="filePreviewModalLabel">File Preview</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="file-preview-content"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-danger" id="remove-file-btn">Remove File</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
